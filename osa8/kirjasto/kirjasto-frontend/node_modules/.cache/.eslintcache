[{"/Users/silva/Documents/Aalto/Ohjelmointi/Full Stack Open/osa8/kirjasto/kirjasto-frontend/src/index.js":"1","/Users/silva/Documents/Aalto/Ohjelmointi/Full Stack Open/osa8/kirjasto/kirjasto-frontend/src/App.js":"2","/Users/silva/Documents/Aalto/Ohjelmointi/Full Stack Open/osa8/kirjasto/kirjasto-frontend/src/components/NewBook.js":"3","/Users/silva/Documents/Aalto/Ohjelmointi/Full Stack Open/osa8/kirjasto/kirjasto-frontend/src/components/Authors.js":"4","/Users/silva/Documents/Aalto/Ohjelmointi/Full Stack Open/osa8/kirjasto/kirjasto-frontend/src/components/Login.js":"5","/Users/silva/Documents/Aalto/Ohjelmointi/Full Stack Open/osa8/kirjasto/kirjasto-frontend/src/components/Books.js":"6","/Users/silva/Documents/Aalto/Ohjelmointi/Full Stack Open/osa8/kirjasto/kirjasto-frontend/src/components/Recommend.js":"7"},{"size":729,"mtime":1647544748903,"results":"8","hashOfConfig":"9"},{"size":1671,"mtime":1647557515951,"results":"10","hashOfConfig":"9"},{"size":2106,"mtime":1647546062858,"results":"11","hashOfConfig":"9"},{"size":1960,"mtime":1647556081529,"results":"12","hashOfConfig":"9"},{"size":1389,"mtime":1647555960397,"results":"13","hashOfConfig":"9"},{"size":1500,"mtime":1647557691170,"results":"14","hashOfConfig":"9"},{"size":1268,"mtime":1647557632593,"results":"15","hashOfConfig":"9"},{"filePath":"16","messages":"17","suppressedMessages":"18","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"uiknc7",{"filePath":"19","messages":"20","suppressedMessages":"21","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"23","messages":"24","suppressedMessages":"25","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"26","messages":"27","suppressedMessages":"28","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"29","messages":"30","suppressedMessages":"31","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"32","usedDeprecatedRules":"22"},{"filePath":"33","messages":"34","suppressedMessages":"35","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"36"},{"filePath":"37","messages":"38","suppressedMessages":"39","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"40","usedDeprecatedRules":"22"},"/Users/silva/Documents/Aalto/Ohjelmointi/Full Stack Open/osa8/kirjasto/kirjasto-frontend/src/index.js",[],[],"/Users/silva/Documents/Aalto/Ohjelmointi/Full Stack Open/osa8/kirjasto/kirjasto-frontend/src/App.js",[],[],["41","42"],"/Users/silva/Documents/Aalto/Ohjelmointi/Full Stack Open/osa8/kirjasto/kirjasto-frontend/src/components/NewBook.js",[],[],"/Users/silva/Documents/Aalto/Ohjelmointi/Full Stack Open/osa8/kirjasto/kirjasto-frontend/src/components/Authors.js",[],[],"/Users/silva/Documents/Aalto/Ohjelmointi/Full Stack Open/osa8/kirjasto/kirjasto-frontend/src/components/Login.js",["43"],[],"import { gql, useMutation } from \"@apollo/client\"\nimport React, { useEffect, useState } from \"react\"\n\nconst LOGIN = gql`\n  mutation login($username: String!, $password: String!){\n    login(username: $username, password: $password) {\n      value\n    }\n  }\n`\n\nconst Login = (props) => {\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n\n  const [ login, result ] = useMutation(LOGIN)\n\n  useEffect(() => {\n    if (result.data) {\n      const token = result.data.login.value\n      props.setToken(token)\n      localStorage.setItem('library-user-token', token)\n    }\n  }, [result.data])\n\n  const submit = (event) => {\n    event.preventDefault()\n\n    login({variables: {username: username, password: password}})\n    setUsername('')\n    setPassword('')\n    props.setPage('authors')\n  }\n\n  if (!props.show) {\n    return null\n  }\n\n  return (\n    <div>\n      <form onSubmit={submit}>\n        <div>\n          username\n          <input \n            value={username}\n            onChange={({ target }) => setUsername(target.value) }\n          />\n        </div>\n        <div>\n          password\n          <input\n            type='password'\n            value={password}\n            onChange={({ target }) => setPassword(target.value) }\n          />\n        </div>\n        <button type=\"submit\">Login</button>\n      </form>\n    </div>\n  )\n}\n\nexport default Login","/Users/silva/Documents/Aalto/Ohjelmointi/Full Stack Open/osa8/kirjasto/kirjasto-frontend/src/components/Books.js",["44","45"],[],"import React, { useEffect, useState } from 'react'\nimport { gql, useQuery } from '@apollo/client'\n\nconst GET_BOOKS = gql`\n  query allBooks($genre: String){\n    allBooks(genre: $genre){\n      title\n      published\n      author{\n        name\n      }\n      genres\n    }\n  }\n`\nconst Books = (props) => {\n  const [filter, setFilter] = useState(null)\n  const { loading, error, data } = useQuery(GET_BOOKS, {\n    variables: { genre: filter }\n  });\n\n  if (loading) {\n    return(\n      <div>\n        loading...\n      </div>\n    )\n  }\n\n  if (!props.show) {\n    return null\n  }\n\n  const books = data.allBooks\n  const onlyUnique = (value, index, self) => {\n    return self.indexOf(value) === index;\n  }\n  const genres = books.flatMap((b) => b.genres).filter(onlyUnique)\n\n  return (\n    <div>\n      <h2>books</h2>\n      {filter ? <div>in genre {filter}</div>: <div>showing all</div>}\n      <table>\n        <tbody>\n          <tr>\n            <th></th>\n            <th>author</th>\n            <th>published</th>\n          </tr>\n          {books.map((b) => (\n            <tr key={b.title}>\n              <td>{b.title}</td>\n              <td>{b.author.name}</td>\n              <td>{b.published}</td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n      <div>\n        {genres.map((g) => \n          <button key={g} onClick={() => setFilter(g)}>{g}</button>\n        )}\n        <button key={'empty'} onClick={() => setFilter(null)}>all genres</button>\n      </div>\n    </div>\n  )\n}\n\nexport default Books\n","/Users/silva/Documents/Aalto/Ohjelmointi/Full Stack Open/osa8/kirjasto/kirjasto-frontend/src/components/Recommend.js",["46","47","48"],[],"import React, { useEffect, useState } from 'react'\nimport { gql, useQuery } from '@apollo/client'\n\nconst GET_BOOKS = gql`\n  query allBooks($genre: String){\n    allBooks(genre: $genre){\n      title\n      published\n      author{\n        name\n      }\n      genres\n    }\n  }\n`\n\nconst GET_CURRENT_USER = gql`\n  query me {\n    me {\n        favoriteGenre\n      }\n  }\n`\n\nconst Recommended = (props) => {\n  const result = useQuery(GET_CURRENT_USER)\n  const { loading, error, data } = useQuery(GET_BOOKS, {\n    variables: { genre: result.data?.me.favoriteGenre },\n    pollInterval: 500\n  });\n\n  if (loading) {\n    return(\n      <div>\n        loading...\n      </div>\n    )\n  }\n\n  if (!props.show) {\n    return null\n  }\n\n  const books = data.allBooks\n\n  return (\n    <div>\n      <h2>books</h2>\n      <div>\n        books in your favorite category\n      </div>\n      <table>\n        <tbody>\n          <tr>\n            <th></th>\n            <th>author</th>\n            <th>published</th>\n          </tr>\n          {books.map((b) => (\n            <tr key={b.title}>\n              <td>{b.title}</td>\n              <td>{b.author.name}</td>\n              <td>{b.published}</td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  )\n}\n\nexport default Recommended\n",{"ruleId":"49","replacedBy":"50"},{"ruleId":"51","replacedBy":"52"},{"ruleId":"53","severity":1,"message":"54","line":24,"column":6,"nodeType":"55","endLine":24,"endColumn":19,"suggestions":"56"},{"ruleId":"57","severity":1,"message":"58","line":1,"column":17,"nodeType":"59","messageId":"60","endLine":1,"endColumn":26},{"ruleId":"57","severity":1,"message":"61","line":18,"column":20,"nodeType":"59","messageId":"60","endLine":18,"endColumn":25},{"ruleId":"57","severity":1,"message":"58","line":1,"column":17,"nodeType":"59","messageId":"60","endLine":1,"endColumn":26},{"ruleId":"57","severity":1,"message":"62","line":1,"column":28,"nodeType":"59","messageId":"60","endLine":1,"endColumn":36},{"ruleId":"57","severity":1,"message":"61","line":27,"column":20,"nodeType":"59","messageId":"60","endLine":27,"endColumn":25},"no-native-reassign",["63"],"no-negated-in-lhs",["64"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'props'. Either include it or remove the dependency array. However, 'props' will change when *any* prop changes, so the preferred fix is to destructure the 'props' object outside of the useEffect call and refer to those specific props inside useEffect.","ArrayExpression",["65"],"no-unused-vars","'useEffect' is defined but never used.","Identifier","unusedVar","'error' is assigned a value but never used.","'useState' is defined but never used.","no-global-assign","no-unsafe-negation",{"desc":"66","fix":"67"},"Update the dependencies array to be: [props, result.data]",{"range":"68","text":"69"},[610,623],"[props, result.data]"]